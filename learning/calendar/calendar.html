<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>peteryfren_works_hard_2014_2015</title>

<style type="text/css">

/*
Color theme: http://www.uehtml.com/post/8914/
*/

div.quad {
	/*background-color:#69b273; width:300px; height:200px; float:left; */
	background-color:#96cfac; width:300px; height:200px; float:left;
	padding-left: 30px; 
	padding-top: 20px;
	margin-bottom:10px; 
}
div.border {background-color:#ffffff; width:10px; float:left;}

body{ 
	/*background-color:#fff5af;*/
	background-color:#ffffff;
}

/*
They are calendar styles.
peteryfren 20150922
*/
.calendar-table {
	border: 0px; 
	font-size: 1em;
	text-align: center; 
	font-family:"Trebuchet MS", Arial, Helvetica, sans-serif;
}

.calendar-header {
	font-size: 1.2em;
	background-color:#cee4dc; 
	border:1px solid #eeee00;
	border-collapse:collapse;
}

.calendar-work-day {
	/*background-color:#647eb5; */
	background-color:#1d50a5;
	color:#ffffff; 
}

.calendar-holiday {
	/*background-color:#eb6133;*/
	background-color:#e69d00;
	color:#ffffff; 
}

</style>

<script type="text/javascript">

// these are labels for the days of the week
cal_days_labels = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];

// these are human-readable month name labels, in order
cal_months_labels = ['January', 'February', 'March', 'April',
                     'May', 'June', 'July', 'August', 'September',
                     'October', 'November', 'December'];

// these are the days of the week for each month, in order
cal_days_in_month = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];

var works_map = { "2014-09-25":0, "2014-09-26":0, "2014-10-09":0, "2014-10-13":0, "2014-10-14":0,
"2014-10-16":0, "2014-11-01":1, "2014-11-10":0, "2014-11-11":0, "2014-11-13":0,
"2014-11-15":1, "2014-11-18":0, "2014-11-19":0, "2014-11-20":0, "2014-11-21":0,
"2014-11-22":1, "2014-11-25":0, "2014-11-26":0, "2014-11-29":1, "2014-12-03":0,
"2014-12-05":0, "2014-12-06":1, "2014-12-10":0, "2014-12-13":1, "2014-12-18":0,
"2014-12-20":1, "2014-12-22":0, "2014-12-27":1, "2015-01-05":0, "2015-01-06":0,
"2015-01-10":1, "2015-01-13":0, "2015-01-16":0, "2015-01-17":1, "2015-01-19":0,
"2015-01-21":0, "2015-01-24":1, "2015-01-27":0, "2015-01-29":0, "2015-01-31":1,
"2015-02-02":0, "2015-02-03":0, "2015-02-07":1, "2015-02-08":1, "2015-02-10":0,
"2015-02-14":1, "2015-03-03":0, "2015-03-06":0, "2015-03-10":0, "2015-03-11":0,
"2015-03-14":1, "2015-03-16":0, "2015-03-17":0, "2015-03-20":0, "2015-03-21":1,
"2015-03-23":0, "2015-03-25":0, "2015-03-27":0, "2015-03-28":1, "2015-03-30":0,
"2015-04-01":0, "2015-04-04":1, "2015-04-05":1, "2015-04-07":0, "2015-04-09":0,
"2015-04-10":0, "2015-04-11":1, "2015-04-13":0, "2015-04-14":0, "2015-04-16":0,
"2015-04-17":0, "2015-04-18":1, "2015-04-23":0, "2015-04-25":1, "2015-04-28":0,
"2015-04-30":0, "2015-05-05":0, "2015-05-06":0, "2015-05-07":0, "2015-05-08":0,
"2015-05-09":1, "2015-05-11":0, "2015-05-13":0, "2015-05-14":0, "2015-05-15":0,
"2015-05-16":1, "2015-05-17":1, "2015-05-19":0, "2015-05-23":1, "2015-05-25":0,
"2015-05-26":0, "2015-05-27":0, "2015-05-31":1, "2015-06-06":1, "2015-06-08":0,
"2015-06-09":0, "2015-06-11":0, "2015-06-12":0, "2015-06-13":1, "2015-06-16":0,
"2015-06-17":0, "2015-06-18":0, "2015-06-19":0, "2015-06-23":0, "2015-06-24":0,
"2015-06-25":0, "2015-06-26":0, "2015-06-27":1, "2015-06-29":0, "2015-06-30":0,
"2015-07-01":0, "2015-07-02":0, "2015-07-03":0, "2015-07-04":1, "2015-07-07":0,
"2015-07-09":0, "2015-07-10":0, "2015-07-11":1, "2015-07-13":0, "2015-07-14":0,
"2015-07-15":0, "2015-07-16":0, "2015-07-17":0, "2015-07-18":0, "2015-07-20":0,
"2015-07-21":0, "2015-07-23":0, "2015-07-24":0, "2015-07-25":1, "2015-07-27":0,
"2015-07-28":0, "2015-07-29":0, "2015-07-30":0, "2015-07-31":0, "2015-08-01":1,
"2015-08-03":0, "2015-08-04":0, "2015-08-05":0, "2015-08-06":0, "2015-08-07":0,
"2015-08-08":1, "2015-08-10":0, "2015-08-11":0, "2015-08-12":0, "2015-08-13":0,
"2015-08-14":0, "2015-08-15":1, "2015-08-17":0, "2015-08-18":0, "2015-08-21":0,
"2015-08-22":1, "2015-08-24":0, "2015-08-25":0, "2015-08-26":0, "2015-08-28":0,
"2015-08-29":1, "2015-08-31":0, "2015-09-01":0, "2015-09-02":0, "2015-09-07":0,
"2015-09-08":0, "2015-09-09":0, "2015-09-10":0, "2015-09-11":0, "2015-09-12":1,
"2015-09-14":0, "2015-09-15":0, "2015-09-16":0, "2015-09-17":0, "2015-09-18":0,
"2015-09-19":1, "2015-09-21":0, "2015-09-22":0, "2015-09-23":0, "2015-09-25":0,
"2015-09-26":1, "2015-09-27":0, "2015-09-28":0, "2015-09-29":0, "2015-10-09":0,
"2015-10-14":0, "2015-10-15":0, "2015-10-16":0, "2015-10-17":1, "2015-10-20":0,
"2015-10-23":0, "2015-10-24":1, "2015-10-26":0, "2015-10-27":0, "2015-10-28":0,
"2015-10-29":0, "2015-10-31":0, "2015-11-02":0, "2015-11-03":0, "2015-11-04":0,
"2015-11-07":0, "2015-11-08":0, "2015-11-09":0, "2015-11-10":0, "2015-11-13":0,
"2015-11-14":1, "2015-11-15":0, "2015-11-16":0, "2015-11-17":0, "2015-11-19":0,
"2015-11-20":0, "2015-11-21":1, "2015-11-22":1, "2015-11-23":0, "2015-11-28":1,
"2015-11-30":0, "2015-12-02":0, "2015-12-03":0, "2015-12-05":1, "2015-12-07":0,
"2015-12-11":0, "2015-12-12":1, "2015-12-14":0, "2015-12-16":0, "2015-12-18":0,
"2015-12-19":1, "2015-12-22":0, "2015-12-23":0, "2015-12-26":1, "2015-12-29":0 };

// this is the current date
cal_current_date = new Date(); 

function Calendar(month, year) {
  this.month = (isNaN(month) || month == null) ? cal_current_date.getMonth() : month;
  this.year  = (isNaN(year) || year == null) ? cal_current_date.getFullYear() : year;
  
  console.log("m = %d, y = %d", this.month, this.year);
  
  this.html = '';
}

Calendar.prototype.generateHTML = function(){

  // get first day of month
  var firstDay = new Date(this.year, this.month, 1);
  var startingDay = firstDay.getDay();
  
  // find number of days in month
  var monthLength = cal_days_in_month[this.month];
  
  // compensate for leap year
  if (this.month == 1) { // February only!
    if((this.year % 4 == 0 && this.year % 100 != 0) || this.year % 400 == 0){
      monthLength = 29;
    }
  }
  
  // do the header
  var monthName = cal_months_labels[this.month]
  
  var html = '<div class="quad">';
  
  html += '<table class="calendar-table">';
  html += '<tr><th colspan="7">';
  html +=  monthName + "&nbsp;" + this.year;
  html += '</th></tr>';
  html += '<tr class="calendar-header">';
  for(var i = 0; i <= 6; i++ ){
    html += '<td class="calendar-header-day">';
    html += cal_days_labels[i];
    html += '</td>';
  }
  html += '</tr><tr>';

  // fill in the days
  var day = 1;
  // this loop is for is weeks (rows)
  for (var i = 0; i < 9; i++) {
    // this loop is for weekdays (cells)
    for (var j = 0; j <= 6; j++) { 
      
	  /*
	  html += '<td class="calendar-day">';
      if (day <= monthLength && (i > 0 || j >= startingDay)) {
        html += day;		
        day++;
      }*/
	  
	  if (day <= monthLength && (i > 0 || j >= startingDay)) {
		var res = '';
		
		var nm = new Number(this.year); res += nm.toString();
		
		nm = new Number(this.month + 1); res += '-';
		if (this.month+1 < 10) {
			res += '0'
		} res += nm.toString();
		
		nm = new Number(day); res += '-'; 
		if (day < 10) {
			res += '0'
		}
		res += nm.toString();
		
		// console.log('%d-%d-%d', this.year, this.month+1, day);
		console.log('%s, %d', res, works_map[res]);
		
		if (works_map[res] == 1) {
			html += '<td class="calendar-holiday">';
		} else if (works_map[res] == 0) {
			html += '<td class="calendar-work-day">';
		} else {
			html += '<td class="calendar-day">';
		}
		
		html += day;
		day++;
		
	  } else {
		html += '<td class="calendar-day">';
	  }
	  
      html += '</td>';
    }
    // stop making rows if we've run out of days
    if (day > monthLength) {
      break;
    } else {
      html += '</tr><tr>';
    }
  }
  html += '</tr></table>';
  html += '</div>';
  
  this.html = html;
}

Calendar.prototype.getHTML = function() {
  return this.html;
}

</script>

</head>

<body>

<script type="text/javascript">
  
  var list = [8, 9, 10, 11, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11];	// val + 1 == month.
  var html_str = '';
  
  for (var k = 0; k < list.length; k++) {
	var y = 2014;
	if (k >= 4) {
		y = 2015;
	}
	
	var cal = new Calendar(list[k], y);
	cal.generateHTML();
	html_str += cal.getHTML();
	
	html_str += '<div class="border"> <p> </p> </div>';
	
  }

/*  
  var cal = new Calendar();
  cal.generateHTML();
  html_str = cal.getHTML();
  
  html_str += '<div class="border"> <p> </p> </div>';
  
  cal = new Calendar(7, 2014)
  cal.generateHTML();
  html_str += cal.getHTML();
*/
 
  document.write( html_str );
  
</script>

</body>
</html>
